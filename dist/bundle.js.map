{
  "version": 3,
  "sources": ["../content/extraction/transcript.js", "../content/extraction/metadata.js", "../content/extraction/chapters.js", "../content/extraction/description.js", "../content/backend/api.js", "../content/ui/components.js", "../content/ui/events.js", "../content/moduleEntryPoint.js"],
  "sourcesContent": ["// content/extraction/transcript.js\r\n\r\nexport const timestampToSeconds = (timestamp) => {\r\n  const parts = timestamp.split(\":\").map(Number);\r\n  if (parts.length === 2) return parts[0] * 60 + parts[1];\r\n  return parts[0] * 3600 + parts[1] * 60 + parts[2];\r\n};\r\n\r\nexport const secondsToTimestamp = (seconds) => {\r\n  const mins = Math.floor(seconds / 60);\r\n  const secs = seconds % 60;\r\n  return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n};\r\n\r\nexport const extractTranscriptClientSide = async (videoId) => {\r\n  console.log(\"Starting fast client-side transcript extraction...\");\r\n  const video = document.querySelector(\"video\");\r\n  if (!video) throw new Error(\"Video element not found\");\r\n\r\n  const duration = video.duration || 600;\r\n  const groupBy = duration >= 1200 ? 60 : duration >= 480 ? 30 : 15;\r\n  console.log(\"Using time grouping:\", groupBy, \"seconds\");\r\n\r\n  let shouldClose = false;\r\n  let segments = document.querySelectorAll(\"ytd-transcript-segment-renderer\");\r\n\r\n  if (segments.length === 0) {\r\n    let opened = false;\r\n    await new Promise((resolve) => setTimeout(resolve, 1000));\r\n    const buttons = Array.from(document.querySelectorAll(\"button\"));\r\n\r\n    const transcriptButton = buttons.find(\r\n      (btn) =>\r\n        btn.getAttribute(\"aria-label\") === \"Transcript\" ||\r\n        btn.textContent?.trim().toLowerCase() === \"transcript\"\r\n    );\r\n    if (transcriptButton) {\r\n      transcriptButton.click();\r\n      shouldClose = true;\r\n      for (let i = 0; i < 15; i++) {\r\n        await new Promise((resolve) => setTimeout(resolve, 300));\r\n        segments = document.querySelectorAll(\"ytd-transcript-segment-renderer\");\r\n        if (segments.length > 0) {\r\n          opened = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!opened) {\r\n      const moreButton = buttons.find((btn) =>\r\n        btn.getAttribute(\"aria-label\")?.includes(\"More actions\")\r\n      );\r\n      if (moreButton) {\r\n        moreButton.click();\r\n        await new Promise((resolve) => setTimeout(resolve, 500));\r\n        const menuButtons = Array.from(\r\n          document.querySelectorAll(\"button, ytd-menu-service-item-renderer\")\r\n        );\r\n        const transcriptOption = menuButtons.find((btn) =>\r\n          btn.textContent?.toLowerCase().includes(\"show transcript\")\r\n        );\r\n        if (transcriptOption) {\r\n          transcriptOption.click();\r\n          shouldClose = true;\r\n          for (let i = 0; i < 15; i++) {\r\n            await new Promise((resolve) => setTimeout(resolve, 300));\r\n            segments = document.querySelectorAll(\r\n              \"ytd-transcript-segment-renderer\"\r\n            );\r\n            if (segments.length > 0) {\r\n              opened = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!opened && segments.length === 0) {\r\n      for (let i = 0; i < 20; i++) {\r\n        await new Promise((resolve) => setTimeout(resolve, 500));\r\n        segments = document.querySelectorAll(\"ytd-transcript-segment-renderer\");\r\n        if (segments.length > 0) break;\r\n      }\r\n    }\r\n\r\n    if (segments.length === 0)\r\n      throw new Error(\"No transcript available for this video.\");\r\n  }\r\n\r\n  const transcriptContainer =\r\n    document.querySelector(\"#segments-container\") ||\r\n    document.querySelector(\r\n      \"ytd-transcript-segment-list-renderer #segments-container\"\r\n    ) ||\r\n    document.querySelector('[id=\"segments-container\"]') ||\r\n    document.querySelector(\r\n      'ytd-engagement-panel-section-list-renderer[target-id=\"engagement-panel-searchable-transcript\"] #content'\r\n    );\r\n\r\n  if (transcriptContainer) {\r\n    let previousCount = segments.length;\r\n    let stableCount = 0;\r\n    for (let i = 0; i < 60; i++) {\r\n      // Max attempts\r\n      transcriptContainer.scrollTop = transcriptContainer.scrollHeight;\r\n      await new Promise((resolve) => setTimeout(resolve, 150));\r\n      segments = document.querySelectorAll(\"ytd-transcript-segment-renderer\");\r\n      if (segments.length === previousCount) {\r\n        stableCount++;\r\n        if (stableCount >= 4) break;\r\n      } else {\r\n        stableCount = 0;\r\n        previousCount = segments.length;\r\n      }\r\n    }\r\n  }\r\n\r\n  const groups = {};\r\n  Array.from(segments).forEach((seg) => {\r\n    const time =\r\n      seg.querySelector(\".segment-timestamp\")?.textContent.trim() || \"0:00\";\r\n    const text = seg.querySelector(\".segment-text\")?.textContent.trim() || \"\";\r\n    if (!text) return;\r\n    const seconds = timestampToSeconds(time);\r\n    const group = Math.floor(seconds / groupBy) * groupBy;\r\n    if (!groups[group]) groups[group] = [];\r\n    groups[group].push(text);\r\n  });\r\n\r\n  if (Object.keys(groups).length === 0)\r\n    throw new Error(\r\n      `Found ${segments.length} segments but couldn't extract text.`\r\n    );\r\n\r\n  const transcriptArray = Object.keys(groups)\r\n    .sort((a, b) => Number(a) - Number(b))\r\n    .map((key) => {\r\n      const time = secondsToTimestamp(Number(key));\r\n      return { [time]: groups[key].join(\" \") };\r\n    });\r\n\r\n  const transcriptText = Object.keys(groups)\r\n    .sort((a, b) => Number(a) - Number(b))\r\n    .map((key) => {\r\n      const time = secondsToTimestamp(Number(key));\r\n      return `[${time}] ${groups[key].join(\" \")}`;\r\n    })\r\n    .join(\"\\n\");\r\n\r\n  if (shouldClose) {\r\n    const allButtons = Array.from(document.querySelectorAll(\"button\"));\r\n    const closeButton = allButtons.find((btn) => {\r\n      const label = btn.getAttribute(\"aria-label\")?.toLowerCase() || \"\";\r\n      return label.includes(\"close\") && label.includes(\"transcript\");\r\n    });\r\n    if (closeButton) closeButton.click();\r\n  }\r\n\r\n  console.log(\r\n    \"Client-side extraction successful, segments:\",\r\n    transcriptArray.length\r\n  );\r\n  return { array: transcriptArray, text: transcriptText };\r\n};\r\n\r\nexport const getTranscriptViaAPI = async (videoId) => {\r\n  console.log(\"Fetching transcript via API...\");\r\n  const url = `${BACKEND_URL}/transcript?video_id=${videoId}`;\r\n  const response = await fetch(url);\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(\r\n      errorData.error || `API request failed with status ${response.status}`\r\n    );\r\n  }\r\n  const data = await response.json();\r\n  console.log(\"API transcript received\");\r\n\r\n  const lines = data.transcript.split(\"\\n\");\r\n  const transcriptArray = lines\r\n    .map((line) => {\r\n      const match = line.match(/^\\[?(\\d{1,2}:\\d{2}(?::\\d{2})?)\\]?\\s+(.+)$/);\r\n      if (match) return { [match[1]]: match[2] };\r\n      return null;\r\n    })\r\n    .filter(Boolean);\r\n\r\n  const transcriptText = lines\r\n    .filter((line) => line.trim())\r\n    .map((line) => {\r\n      const match = line.match(/^\\[?(\\d{1,2}:\\d{2}(?::\\d{2})?)\\]?\\s+(.+)$/);\r\n      return match ? `[${match[1]}] ${match[2]}` : line;\r\n    })\r\n    .join(\"\\n\");\r\n\r\n  return { array: transcriptArray, text: transcriptText };\r\n};\r\n", "// content/extraction/metadata.js\r\n\r\nlet cachedMetadata = null; // Local cache for this module\r\n\r\nexport const extractMetadata = async () => {\r\n  if (cachedMetadata) {\r\n    console.log(\"Using cached metadata\");\r\n    return cachedMetadata;\r\n  }\r\n  console.log(\"Extracting essential metadata...\");\r\n  const video = document.querySelector(\"video\");\r\n  const duration = video?.duration || 600;\r\n\r\n  // Get like count\r\n  let likeCount = null;\r\n  const likeButton =\r\n    document.querySelector(\r\n      'like-button-view-model button[aria-label*=\"like\"]'\r\n    ) ||\r\n    document.querySelector(\r\n      'ytd-toggle-button-renderer.ytd-menu-renderer button[aria-label*=\"like\"]'\r\n    );\r\n  if (likeButton) {\r\n    const ariaLabel = likeButton.getAttribute(\"aria-label\");\r\n    const match = ariaLabel?.match(/[\\d,]+/);\r\n    likeCount = match ? match[0].replace(/,/g, \"\") : null;\r\n  }\r\n\r\n  // Get subscriber count\r\n  let subscriberCount = null;\r\n  const subButton =\r\n    document.querySelector(\"#subscriber-count\")?.textContent?.trim() ||\r\n    document\r\n      .querySelector(\"ytd-subscribe-button-renderer #owner-sub-count\")\r\n      ?.textContent?.trim();\r\n  if (subButton) subscriberCount = subButton;\r\n\r\n  // Get social links\r\n  const socialLinks = {};\r\n  document\r\n    .querySelectorAll(\"ytd-channel-tagline-renderer a, #link-list-container a\")\r\n    .forEach((link) => {\r\n      const href = link.href;\r\n      const text = link.textContent?.toLowerCase() || \"\";\r\n      if (href.includes(\"instagram.com\")) socialLinks.instagram = href;\r\n      else if (href.includes(\"tiktok.com\")) socialLinks.tiktok = href;\r\n      else if (href.includes(\"twitter.com\") || href.includes(\"x.com\"))\r\n        socialLinks.twitter = href;\r\n      else if (href.includes(\"facebook.com\")) socialLinks.facebook = href;\r\n      else if (text.includes(\"website\") || text.includes(\"site\"))\r\n        socialLinks.website = href;\r\n    });\r\n\r\n  const metadata = {\r\n    title:\r\n      document\r\n        .querySelector(\"h1.ytd-watch-metadata yt-formatted-string\")\r\n        ?.textContent?.trim() ||\r\n      document.querySelector(\"h1.title\")?.textContent?.trim() ||\r\n      \"Unknown Title\",\r\n    video_id: new URLSearchParams(window.location.search).get(\"v\") || \"\",\r\n    channel: {\r\n      name:\r\n        document\r\n          .querySelector(\"ytd-channel-name#channel-name yt-formatted-string a\")\r\n          ?.textContent?.trim() ||\r\n        document.querySelector(\"#channel-name a\")?.textContent?.trim() ||\r\n        \"Unknown Channel\",\r\n      url:\r\n        document.querySelector(\r\n          \"ytd-channel-name#channel-name yt-formatted-string a\"\r\n        )?.href ||\r\n        document.querySelector(\"#channel-name a\")?.href ||\r\n        \"\",\r\n      subscriber_count: subscriberCount,\r\n    },\r\n    content: {\r\n      duration_seconds: Math.floor(duration),\r\n      duration_formatted: (() => {\r\n        const hours = Math.floor(duration / 3600);\r\n        const mins = Math.floor((duration % 3600) / 60);\r\n        const secs = Math.floor(duration % 60);\r\n        if (hours > 0)\r\n          return `${hours}:${mins.toString().padStart(2, \"0\")}:${secs\r\n            .toString()\r\n            .padStart(2, \"0\")}`;\r\n        return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n      })(),\r\n    },\r\n    engagement: {\r\n      view_count:\r\n        document\r\n          .querySelector(\"ytd-video-view-count-renderer .view-count\")\r\n          ?.textContent?.trim() ||\r\n        document.querySelector(\"#info span.view-count\")?.textContent?.trim() ||\r\n        \"Unknown\",\r\n      upload_date:\r\n        document\r\n          .querySelector(\"#info-strings yt-formatted-string\")\r\n          ?.textContent?.trim() ||\r\n        document\r\n          .querySelector(\"#date yt-formatted-string\")\r\n          ?.textContent?.trim() ||\r\n        \"Unknown\",\r\n      like_count: likeCount,\r\n    },\r\n    context: {\r\n      social_links: Object.keys(socialLinks).length > 0 ? socialLinks : null,\r\n    },\r\n    extraction_timestamp: new Date().toISOString(),\r\n  };\r\n\r\n  cachedMetadata = metadata;\r\n  console.log(\"Essential metadata extraction complete\");\r\n  return metadata;\r\n};\r\n", "// content/extraction/chapters.js\r\n\r\nexport const extractChapters = async () => {\r\n  console.log(\"Extracting chapters...\");\r\n  const chaptersMap = new Map();\r\n  document\r\n    .querySelectorAll(\"ytd-macro-markers-list-item-renderer\")\r\n    .forEach((item) => {\r\n      const timeEl = item.querySelector(\"#time\");\r\n      const titleEl = item.querySelector(\"#details h4\");\r\n      if (timeEl && titleEl)\r\n        chaptersMap.set(timeEl.textContent.trim(), titleEl.textContent.trim());\r\n    });\r\n\r\n  if (chaptersMap.size === 0) {\r\n    document\r\n      .querySelectorAll(\r\n        \"#structured-description ytd-horizontal-card-list-renderer ytd-macro-markers-list-item-renderer\"\r\n      )\r\n      .forEach((item) => {\r\n        const timeEl = item.querySelector(\"#time\");\r\n        const titleEl = item.querySelector(\"#details h4\");\r\n        if (timeEl && titleEl)\r\n          chaptersMap.set(\r\n            timeEl.textContent.trim(),\r\n            titleEl.textContent.trim()\r\n          );\r\n      });\r\n  }\r\n\r\n  if (chaptersMap.size === 0) {\r\n    console.log(\"No chapters found\");\r\n    return [];\r\n  }\r\n\r\n  const sortedChapters = Array.from(chaptersMap.entries())\r\n    .sort((a, b) => timestampToSeconds(a[0]) - timestampToSeconds(b[0]))\r\n    .map(([timestamp, title]) => ({ timestamp, title }));\r\n\r\n  console.log(`Found ${sortedChapters.length} chapters`);\r\n  return sortedChapters;\r\n};\r\n\r\n// Import timestampToSeconds from transcript module if needed\r\n// import { timestampToSeconds } from './transcript.js'; // Uncomment if not available globally\r\nconst timestampToSeconds = (timestamp) => {\r\n  // Fallback if not imported\r\n  const parts = timestamp.split(\":\").map(Number);\r\n  if (parts.length === 2) return parts[0] * 60 + parts[1];\r\n  return parts[0] * 3600 + parts[1] * 60 + parts[2];\r\n};\r\n", "// content/extraction/description.js\r\n\r\nexport const extractDescription = async () => {\r\n  console.log(\"Extracting video description...\");\r\n  // Find the description element on YouTube\r\n  const descriptionContainer = document.querySelector(\"#description\");\r\n  const descriptionText =\r\n    descriptionContainer?.textContent?.trim() || \"No description available.\";\r\n\r\n  // This function simply returns the plain text description.\r\n  return descriptionText;\r\n};\r\n", "// content/backend/api.js\r\n\r\nimport { extractChapters } from \"../extraction/chapters.js\";\r\nimport { extractDescription } from \"../extraction/description.js\";\r\nconst BACKEND_URL = \"http://127.0.0.1:5000\";\r\n\r\n// FIX: 'sendToBackend' now accepts metadata as an argument\r\nexport const sendToBackend = async (videoId, transcriptData, metadata) => {\r\n  try {\r\n    console.log(\"Preparing data for backend...\");\r\n\r\n    // Extraction (Chapters and Description)\r\n    const chapters = await extractChapters();\r\n    const description = await extractDescription();\r\n\r\n    // --- JSON Payload (FIXED TITLE ACCESS) ---\r\n    const fullData = {\r\n      video_id: videoId,\r\n      // FIX: Use the 'metadata' object that was passed in\r\n      video_title: metadata?.title || videoId,\r\n\r\n      metadata: metadata, // Send the full metadata object\r\n      description: description,\r\n      chapters: chapters,\r\n      transcript_structured: transcriptData.array,\r\n      extraction_timestamp: new Date().toISOString(),\r\n    };\r\n\r\n    console.log(\"Sending data to backend...\");\r\n    const response = await fetch(`${BACKEND_URL}/store-video-data`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(fullData),\r\n      signal: AbortSignal.timeout(15000),\r\n    });\r\n\r\n    if (response.ok) {\r\n      console.log(\"\u2705 Data sent to backend successfully\");\r\n    } else {\r\n      console.warn(\"\u26A0\uFE0F Backend storage failed:\", response.status);\r\n    }\r\n  } catch (e) {\r\n    console.warn(\"Could not send to backend:\", e.message || e);\r\n  }\r\n};\r\n\r\nexport const getTranscriptFromAPI = async (videoId) => {\r\n  const url = `${BACKEND_URL}/transcript?video_id=${videoId}`;\r\n  const response = await fetch(url);\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(\r\n      errorData.error || `API request failed with status ${response.status}`\r\n    );\r\n  }\r\n  const data = await response.json();\r\n  return data.transcript; // This is the plain text with timestamps\r\n};\r\n\r\nexport const getSummaryFromAPI = async (transcript, summaryType) => {\r\n  const url = `${BACKEND_URL}/summarize`;\r\n  const response = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ transcript, summary_type: summaryType }),\r\n    signal: AbortSignal.timeout(60000),\r\n  });\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({}));\r\n    throw new Error(\r\n      errorData.error || `Summary request failed with status ${response.status}`\r\n    );\r\n  }\r\n  const data = await response.json();\r\n  return data.summary;\r\n};\r\n", "// content/ui/components.js\r\n\r\nimport { timestampToSeconds } from \"../extraction/transcript.js\";\r\n\r\nexport const initializeUI = (container) => {\r\n  // FIX: This is a more comprehensive check for YouTube's dark mode\r\n  const isDarkMode =\r\n    document.documentElement.hasAttribute(\"dark\") ||\r\n    document.documentElement.getAttribute(\"dark\") === \"true\" ||\r\n    document.body.classList.contains(\"dark-mode\");\r\n\r\n  if (isDarkMode) {\r\n    container.classList.add(\"dark-mode\");\r\n  }\r\n};\r\n\r\nexport const showSummary = (summaryText) => {\r\n  const formattedHtml = summaryText\r\n    .replace(/\\n/g, \"<br>\")\r\n    .replace(/\u2022/g, \"<br>\u2022\")\r\n    .replace(/Key Insights:/i, \"<strong>Key Insights:</strong>\");\r\n  const summaryContent = document.getElementById(\"summary-content\");\r\n  summaryContent.innerHTML = formattedHtml;\r\n  summaryContent.hidden = false;\r\n  document.getElementById(\"initial-view\").hidden = true;\r\n  document.getElementById(\"summary-view\").hidden = false;\r\n  document.getElementById(\"copy-btn\").hidden = false;\r\n  document.getElementById(\"error\").hidden = true;\r\n};\r\n\r\nexport const showTranscript = (transcriptArray) => {\r\n  const transcriptContent = document.getElementById(\"transcript-content\");\r\n\r\n  const formattedHtml = transcriptArray\r\n    .map((entry) => {\r\n      const [timestamp, text] = Object.entries(entry)[0];\r\n      const seconds = timestampToSeconds(timestamp);\r\n      return `<span class=\"timestamp\" data-time=\"${seconds}\" style=\"cursor: pointer; color: #065fd4; font-weight: 500;\">${timestamp}</span> ${text}`;\r\n    })\r\n    .join(\"<br>\");\r\n\r\n  transcriptContent.innerHTML = formattedHtml;\r\n  transcriptContent.hidden = false;\r\n  transcriptContent.style.display = \"block\";\r\n\r\n  transcriptContent.querySelectorAll(\".timestamp\").forEach((span) => {\r\n    span.addEventListener(\"click\", () => {\r\n      const time = parseFloat(span.getAttribute(\"data-time\"));\r\n      const video = document.querySelector(\"video\");\r\n      if (video) {\r\n        video.currentTime = time;\r\n        video.play();\r\n      }\r\n    });\r\n  });\r\n\r\n  const transcriptInitialView = document.getElementById(\r\n    \"transcript-initial-view\"\r\n  );\r\n  transcriptInitialView.hidden = true;\r\n  transcriptInitialView.style.display = \"none\";\r\n\r\n  document.getElementById(\"copy-btn\").hidden = false;\r\n  document.getElementById(\"error\").hidden = true;\r\n};\r\n", "// content/ui/events.js\r\n\r\nexport const setupEventListeners = (\r\n  container,\r\n  currentVideoId,\r\n  cachedMetadata, // This is now passed correctly\r\n  getTranscript,\r\n  generateSummary,\r\n  showTranscript\r\n) => {\r\n  // ===========================================\r\n  // 1. HELPER FUNCTIONS (Defined first)\r\n  // ===========================================\r\n  const debounce = (func, delay) => {\r\n    let timeout;\r\n    return (...args) => {\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(() => func.apply(this, args), delay);\r\n    };\r\n  };\r\n\r\n  const setActiveFilter = (activeId) => {\r\n    container\r\n      .querySelectorAll(\".filter-btn\")\r\n      .forEach((btn) => btn.classList.remove(\"active\"));\r\n    const activeBtn = container.querySelector(`#${activeId}`);\r\n    if (activeBtn) activeBtn.classList.add(\"active\");\r\n  };\r\n\r\n  const createDownloadFilename = (metadata, fallbackId, type) => {\r\n    // FIX: Use metadata.title (from the passed metadata object)\r\n    const videoTitle = metadata?.title || fallbackId || `${type}_data`;\r\n    const cleanTitle = videoTitle\r\n      .replace(/[^\\w\\s-]/g, \"\")\r\n      .replace(/\\s+/g, \"_\")\r\n      .substring(0, 50);\r\n    return `${type}_${cleanTitle}.txt`;\r\n  };\r\n\r\n  const copyToClipboard = (text) => {\r\n    if (!text) return Promise.resolve();\r\n    return navigator.clipboard.writeText(text);\r\n  };\r\n\r\n  const downloadText = (filename = \"transcript.txt\", text) => {\r\n    const blob = new Blob([text || \"\"], { type: \"text/plain;charset=utf-8\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = filename;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    a.remove();\r\n    setTimeout(() => URL.revokeObjectURL(url), 5000);\r\n  };\r\n\r\n  // ===========================================\r\n  // 2. DOM ELEMENT QUERIES\r\n  // ===========================================\r\n  const tabSummary = container.querySelector(\"#tab-summary\");\r\n  const tabTranscript = container.querySelector(\"#tab-transcript\");\r\n  const pageSummary = container.querySelector(\"#summary-page\");\r\n  const pageTranscript = container.querySelector(\"#transcript-page\");\r\n  const copyBtn = container.querySelector(\"#copy-btn\");\r\n  const downloadBtn = container.querySelector(\"#download-btn\");\r\n  const summaryContent = container.querySelector(\"#summary-content\");\r\n  const transcriptContent = container.querySelector(\"#transcript-content\");\r\n  const summarizeBtn = container.querySelector(\"#summarize-btn\");\r\n  const filterGroup = container.querySelector(\"#summary-filter-group\");\r\n  const themeToggle = container.querySelector(\"#theme-toggle\");\r\n\r\n  // ===========================================\r\n  // 3. ATTACH LISTENERS\r\n  // ===========================================\r\n\r\n  // --- Summary Tab ---\r\n  tabSummary.addEventListener(\"click\", () => {\r\n    // ... (UI logic remains the same)\r\n    tabSummary.classList.add(\"active\");\r\n    tabTranscript.classList.remove(\"active\");\r\n    pageSummary.classList.add(\"active\");\r\n    pageTranscript.classList.remove(\"active\");\r\n    pageSummary.hidden = false;\r\n    pageTranscript.hidden = true;\r\n    copyBtn.hidden = summaryContent.hidden;\r\n    downloadBtn.hidden = summaryContent.hidden;\r\n  });\r\n\r\n  // --- Transcript Tab ---\r\n  const handleTranscriptClick = async () => {\r\n    tabTranscript.classList.add(\"active\");\r\n    tabSummary.classList.remove(\"active\");\r\n    pageTranscript.classList.add(\"active\");\r\n    pageSummary.classList.remove(\"active\");\r\n    pageTranscript.hidden = false;\r\n    pageSummary.hidden = true;\r\n    transcriptContent.hidden = false;\r\n    transcriptContent.style.display = \"block\";\r\n    transcriptContent.innerHTML = \"Loading transcript...\";\r\n\r\n    // FIX: getTranscript now returns an object { array, text }\r\n    const transcriptData = await getTranscript(currentVideoId);\r\n\r\n    if (transcriptData && transcriptData.array) {\r\n      showTranscript(transcriptData.array); // Render the HTML\r\n\r\n      // FIX: Use the 'text' property from the returned data\r\n      const textWithTimestamps =\r\n        transcriptData.text || \"Transcript text not found.\";\r\n\r\n      // Setup copy button\r\n      copyBtn.onclick = () =>\r\n        copyToClipboard(textWithTimestamps).then(() => {\r\n          const originalText = copyBtn.textContent;\r\n          copyBtn.textContent = \"\u2713 Copied!\";\r\n          setTimeout(() => (copyBtn.textContent = originalText), 2000);\r\n        });\r\n\r\n      // Setup download button\r\n      const filename = createDownloadFilename(\r\n        cachedMetadata, // This is the metadata object passed into setupEventListeners\r\n        currentVideoId,\r\n        \"transcript\"\r\n      );\r\n      downloadBtn.onclick = () => downloadText(filename, textWithTimestamps);\r\n\r\n      copyBtn.hidden = false;\r\n      downloadBtn.hidden = false;\r\n    } else {\r\n      transcriptContent.innerHTML = \"Transcript not available.\";\r\n      copyBtn.hidden = true;\r\n      downloadBtn.hidden = true;\r\n    }\r\n  };\r\n  tabTranscript.addEventListener(\"click\", debounce(handleTranscriptClick, 500));\r\n\r\n  // --- Summarize Button ---\r\n  if (summarizeBtn) {\r\n    summarizeBtn.addEventListener(\"click\", async () => {\r\n      setActiveFilter(\"filter-insights\");\r\n      // generateSummary now pulls from the global cache\r\n      await generateSummary(\"insights\");\r\n    });\r\n  }\r\n\r\n  // --- Filter Group ---\r\n  if (filterGroup) {\r\n    filterGroup.addEventListener(\r\n      \"click\",\r\n      debounce(async (e) => {\r\n        if (e.target.classList.contains(\"filter-btn\")) {\r\n          const summaryType = e.target.id.replace(\"filter-\", \"\");\r\n          setActiveFilter(e.target.id);\r\n          await generateSummary(summaryType); // Pass the type\r\n        }\r\n      }, 300)\r\n    );\r\n  }\r\n\r\n  // --- Theme Toggle ---\r\n  if (themeToggle) {\r\n    themeToggle.addEventListener(\"click\", () => {\r\n      // Toggle dark mode on the root container\r\n      container.classList.toggle(\"dark-mode\");\r\n    });\r\n  }\r\n\r\n  // --- Global Copy (for Summary) ---\r\n  copyBtn.addEventListener(\"click\", () => {\r\n    if (pageSummary.classList.contains(\"active\")) {\r\n      const summaryText = summaryContent.innerText;\r\n      copyToClipboard(summaryText).then(() => {\r\n        // ... (feedback logic)\r\n      });\r\n    }\r\n  });\r\n\r\n  // --- Global Download (for Summary) ---\r\n  downloadBtn.addEventListener(\"click\", () => {\r\n    if (pageSummary.classList.contains(\"active\")) {\r\n      const summaryText = summaryContent.innerText;\r\n      const filename = createDownloadFilename(\r\n        cachedMetadata,\r\n        currentVideoId,\r\n        \"summary\"\r\n      );\r\n      downloadText(filename, summaryText);\r\n    }\r\n  });\r\n};\r\n", "// content/moduleEntryPoint.js\r\n\r\nimport * as Extraction from \"./extraction/transcript.js\";\r\nimport * as Metadata from \"./extraction/metadata.js\";\r\nimport {\r\n  sendToBackend,\r\n  getTranscriptFromAPI,\r\n  getSummaryFromAPI,\r\n} from \"./backend/api.js\";\r\nimport { initializeUI, showSummary, showTranscript } from \"./ui/components.js\";\r\nimport { setupEventListeners } from \"./ui/events.js\";\r\n\r\nconst ROOT_ID = \"yt-summarizer-root\";\r\nconst INJECTION_TARGET_ID = \"#secondary\";\r\n\r\n// --- Global State & Cache ---\r\nlet currentVideoId = null;\r\nlet cachedTranscriptArray = null; // Stores the structured array format\r\nlet cachedTranscriptText = null; // Stores the plain text with timestamps\r\nlet cachedMetadata = null; // Stores the video metadata\r\nlet cachedSummaries = {};\r\nlet isSummarizing = false;\r\nlet isExtracting = false;\r\n\r\n// Helper to convert the API's raw text into the structured array\r\nfunction extractTranscriptArrayFromText(transcriptText) {\r\n  if (!transcriptText) return [];\r\n  const lines = transcriptText.split(\"\\n\");\r\n  return lines\r\n    .map((line) => {\r\n      const match = line.match(\r\n        /^\\\\[?(\\\\d{1,2}:\\\\d{2}(?::\\\\d{2})?)\\\\]?\\\\s+(.+)$/\r\n      );\r\n      if (match) {\r\n        return { [match[1]]: match[2] };\r\n      }\r\n      return null;\r\n    })\r\n    .filter(Boolean);\r\n}\r\n\r\n// Main transcript getter\r\nasync function getTranscript(videoId, forceAPI = false) {\r\n  if (isExtracting)\r\n    return { array: cachedTranscriptArray, text: cachedTranscriptText };\r\n\r\n  if (cachedTranscriptArray && !forceAPI) {\r\n    console.log(\"Using cached transcript\");\r\n    return { array: cachedTranscriptArray, text: cachedTranscriptText };\r\n  }\r\n\r\n  isExtracting = true;\r\n  document.getElementById(\"loading\").hidden = false;\r\n  document.getElementById(\"error\").hidden = true;\r\n\r\n  try {\r\n    let transcriptData = { array: null, text: null };\r\n\r\n    // 1. Attempt client-side extraction\r\n    try {\r\n      transcriptData = await Extraction.extractTranscriptClientSide(videoId);\r\n    } catch (clientError) {\r\n      console.warn(\r\n        \"Client-side extraction failed, falling back to API:\",\r\n        clientError.message\r\n      );\r\n      // Don't throw, just proceed to API fallback\r\n    }\r\n\r\n    // 2. If client-side fails (or returns empty), use API\r\n    if (\r\n      !transcriptData ||\r\n      !transcriptData.array ||\r\n      transcriptData.array.length === 0\r\n    ) {\r\n      const apiTranscriptText = await getTranscriptFromAPI(videoId);\r\n      transcriptData = {\r\n        array: extractTranscriptArrayFromText(apiTranscriptText),\r\n        text: apiTranscriptText,\r\n      };\r\n    }\r\n\r\n    // 3. Set cache and send to backend\r\n    cachedTranscriptArray = transcriptData.array;\r\n    cachedTranscriptText = transcriptData.text;\r\n\r\n    // FIX: Pass cachedMetadata to sendToBackend\r\n    sendToBackend(videoId, transcriptData, cachedMetadata).catch((e) =>\r\n      console.warn(\"Background sendToBackend failed:\", e)\r\n    );\r\n\r\n    // FIX: Return the full data object\r\n    return transcriptData;\r\n  } catch (e) {\r\n    console.error(\"getTranscript error:\", e);\r\n    document.getElementById(\"error\").textContent =\r\n      e.message || \"Failed to get transcript.\";\r\n    document.getElementById(\"error\").hidden = false;\r\n    return { array: null, text: null }; // Return null object on failure\r\n  } finally {\r\n    isExtracting = false;\r\n    document.getElementById(\"loading\").hidden = true;\r\n  }\r\n}\r\n\r\nasync function generateSummary(summaryType) {\r\n  if (isSummarizing) return;\r\n\r\n  // Ensure we have transcript text to summarize\r\n  if (!cachedTranscriptText) {\r\n    console.log(\"Waiting for transcript to summarize...\");\r\n    // Await the full transcript data object\r\n    const transcriptData = await getTranscript(currentVideoId);\r\n    if (!transcriptData || !transcriptData.text) {\r\n      console.error(\"Cannot summarize, transcript text is unavailable.\");\r\n      return;\r\n    }\r\n    // getTranscript will have set cachedTranscriptText globally\r\n  }\r\n\r\n  isSummarizing = true;\r\n  document.getElementById(\"loading\").hidden = false;\r\n  document.getElementById(\"error\").hidden = true;\r\n\r\n  try {\r\n    if (cachedSummaries[summaryType]) {\r\n      showSummary(cachedSummaries[summaryType]);\r\n      return;\r\n    }\r\n\r\n    const summary = await getSummaryFromAPI(cachedTranscriptText, summaryType);\r\n    cachedSummaries[summaryType] = summary;\r\n    showSummary(summary);\r\n  } catch (e) {\r\n    console.error(\"generateSummary error:\", e);\r\n    document.getElementById(\"error\").textContent = e.message;\r\n    document.getElementById(\"error\").hidden = false;\r\n  } finally {\r\n    isSummarizing = false;\r\n    document.getElementById(\"loading\").hidden = true;\r\n  }\r\n}\r\n\r\n// --- Initialization & Event Listeners ---\r\nasync function initializeSummarizer(videoId) {\r\n  console.log(\"Initializing summarizer for video:\", videoId);\r\n  currentVideoId = videoId;\r\n  cachedTranscriptArray = null;\r\n  cachedTranscriptText = null;\r\n  cachedMetadata = null;\r\n  cachedSummaries = {};\r\n  isSummarizing = false;\r\n  isExtracting = false;\r\n\r\n  const targetElement = await waitForElement(INJECTION_TARGET_ID);\r\n  if (!targetElement) {\r\n    console.error(\"Could not find injection target.\");\r\n    return;\r\n  }\r\n\r\n  let container = document.getElementById(ROOT_ID);\r\n  if (container) container.remove();\r\n\r\n  container = document.createElement(\"div\");\r\n  container.id = ROOT_ID;\r\n  targetElement.prepend(container);\r\n\r\n  try {\r\n    const uiHtml = await fetch(chrome.runtime.getURL(\"ui.html\")).then((r) =>\r\n      r.text()\r\n    );\r\n    container.innerHTML = uiHtml;\r\n\r\n    // FIX: Load metadata here and store it in the global 'cachedMetadata'\r\n    cachedMetadata = await Metadata.extractMetadata();\r\n\r\n    initializeUI(container); // This will now correctly detect dark mode\r\n\r\n    // Pass functions to event listeners\r\n    setupEventListeners(\r\n      container,\r\n      currentVideoId,\r\n      cachedMetadata, // Pass the loaded metadata\r\n      getTranscript,\r\n      generateSummary,\r\n      showTranscript\r\n    );\r\n  } catch (e) {\r\n    console.error(\"Failed to load ui.html:\", e);\r\n    container.innerHTML =\r\n      '<p style=\"color: red;\">Error: Could not load UI.</p>';\r\n  }\r\n}\r\n\r\nfunction waitForElement(selector) {\r\n  return new Promise((resolve) => {\r\n    if (document.querySelector(selector))\r\n      return resolve(document.querySelector(selector));\r\n\r\n    const observer = new MutationObserver(() => {\r\n      if (document.querySelector(selector)) {\r\n        observer.disconnect();\r\n        resolve(document.querySelector(selector));\r\n      }\r\n    });\r\n    observer.observe(document.body, { childList: true, subtree: true });\r\n  });\r\n}\r\n\r\nfunction extractVideoId(url) {\r\n  try {\r\n    const urlObj = new URL(url);\r\n    const videoId = urlObj.searchParams.get(\"v\");\r\n    if (videoId) return videoId;\r\n    if (urlObj.hostname === \"youtu.be\") return urlObj.pathname.slice(1);\r\n    return null;\r\n  } catch (e) {\r\n    return null;\r\n  }\r\n}\r\n\r\nchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\r\n  if (request.type === \"YOUTUBE_URL_CHANGED\") {\r\n    initializeSummarizer(request.videoId);\r\n    sendResponse({ status: \"received\" });\r\n  }\r\n  return true;\r\n});\r\n\r\nconst initialVideoId = extractVideoId(window.location.href);\r\nif (initialVideoId) {\r\n  initializeSummarizer(initialVideoId);\r\n}\r\n"],
  "mappings": "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",
  "names": ["timestampToSeconds", "BACKEND_URL", "currentVideoId", "cachedMetadata", "getTranscript", "generateSummary", "showTranscript", "cachedMetadata"]
}
